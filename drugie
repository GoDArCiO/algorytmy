#include <stdio.h>
#include <math.h>
int heapify(int A[], int i ,int wys);
int build_heap(int A[], int wys);
int heapsort(int A[],int wysokosc);

int main(){

 char *plikus;
printf("podaj plik\n");
scanf("%s",plikus);
FILE *f=fopen(plikus,"r");
char str[100];
    int j=0,A[100];
    while (fgets(str,100, f)) {
        sscanf(str,"%d",&A[j]);
        printf("%d\n",A[j]);
        j++;
    }

    int lenght=(j);
    heapsort(A,lenght);
    printf("\n");
    for(int i=0;i<lenght;i++)
        printf("|%d| ",A[i]);
return 0;
}

int heapify(int A[], int i,int wys)
    {
        printf("! i = %d !\n",i);
        int pom=0;
        int najw=0;
        int l= 2*i+1;
        int r = 2*i+2;
        int heapsize=wys;
        if (l<heapsize && A[l]>=A[i])
            najw=l;
            else
            najw=i;
        if (r<heapsize && A[r]>=A[najw])
            najw=r;
        if (najw!=i)
            {
                pom=A[i];
                A[i]=A[najw];
                A[najw]=pom;
                heapify(A,najw,wys-1);
            }

    }

////////////////////////////////////////////////////////////////////////
int build_heap(int A[],int wys)
    {

        for(int i=(wys/2 -1);i>=0;i--)
            {
                heapify(A,i,wys);

            }
        for(int i =0 ;i < wys;i++)
            {
                printf("**%d \n",A[i]);
            }
    }
int heapsort(int A[],int wysokosc)
    {
        int pom=0;
        build_heap(A,wysokosc);
        for(int i=wysokosc;i>=1 ;i--)
            {
                printf("\nBiore : %d , i zamieniam z %d \n",A[i-1],A[0]);
                pom=A[wysokosc-1];
                A[wysokosc-1]=A[0];
                A[0]=pom;
                wysokosc--;
                heapify(A,0,wysokosc);
                    for(int k =0 ;k < i;k++)
            {
                printf(" %d /",A[k]);
            }

            }


    }


